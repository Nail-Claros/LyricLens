,{% extends '_template.html' %}

{% block styles %}
   <link rel="stylesheet" href="static/styles/styles.css">
{% endblock %}

{% block body %}
<body>
   <!-- Navbar with logo -->
   <nav class="navbar-img">
       <a href="{{ url_for('index') }}">
           <img src="{{ url_for('static', filename='images/Lyric Lens (Text Logo and Icon) - Horizontal.png') }}" 
                style="height: 100px; width: 300px;">
       </a>
   </nav>

   <!-- Navbar with navigation links -->
   <nav class="navbar">
       <ul class="nav-links">
           <li><a href="{{ url_for('index') }}">HOME</a></li>
           <li><a href="{{ url_for('about') }}">ABOUT</a></li>
           <li><a href="{{ url_for('history') }}">HISTORY</a></li>
       </ul>
   </nav>

   <div class="container">
       <!-- Song History -->
       {% if song_history %}
           <h1>Your Recent Songs</h1>
           <ul class="song-list">
               {% for song in song_history|reverse %}
               <li class="song-item">
                   <!-- Album Cover -->
                   <img class="album-placeholder" src="{{ song['albumCover'] }}" alt="Album Cover">

                   <!-- Song Info -->
                   <div class="song-info">
                       <div class="song-name">{{ song['songName'][:67] }}{% if song['songName']|length > 67 %}...{% endif %}</div>
                       <div class="song-artist">{{ song['artistName']][:67] }}{% if song['artistName']]|length > 67 %}...{% endif %}</div>
                   </div>

                   <!-- Options Popup -->
                   <div class="overlay">
                       <div class="popup-content">
                           <a href="{{ url_for('lyrics', songName=song['songName'], artistName=song['artistName']], albumCover=song['albumCover']) }}">View Lyrics</a>
                       </div>
                   </div>
               </li>
               {% endfor %}
           </ul>
           
           <!-- Clear History Button -->
           <form method="POST" action="{{ url_for('clear_history') }}">
               <button class="clear-history-btn" type="submit">Clear History</button>
           </form>
       {% else %}
           <div class="song-item">
               <h1>No History Found!</h1>
           </div>
       {% endif %}
   </div>

   <!-- JavaScript for Overlay -->
   <script>
       document.addEventListener("DOMContentLoaded", function() {
           const moreHorzImages = document.querySelectorAll(".more_horz");
           const overlays = document.querySelectorAll(".overlay");

           moreHorzImages.forEach((img, index) => {
               img.addEventListener("click", function(event) {
                   event.stopPropagation(); // Prevent event bubbling
                   const overlay = overlays[index];
                   overlay.style.display = "block";
               });
           });

           // Close the popup when clicking elsewhere
           document.addEventListener("click", function() {
               overlays.forEach((overlay) => {
                   overlay.style.display = "none";
               });
           });
       });
   </script>
</body>
{% endblock %}



